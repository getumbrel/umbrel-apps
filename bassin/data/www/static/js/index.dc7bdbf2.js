(()=>{"use strict";var e={936:function(e,s,r){var t=r(893),l=r(294),a=r(745);let n=r.p+"static/svg/logo.70d1fa59.svg";function i(e){let{timer:s}=e,r=Math.max(0,100-s/60*100),l={width:`${r.toFixed(2)}%`};return(0,t.jsxs)("footer",{className:"footer",children:[(0,t.jsx)("div",{className:"progress",style:l}),(0,t.jsxs)("div",{className:"wrapper",children:[(0,t.jsxs)("figure",{children:[(0,t.jsx)("img",{src:n,width:48,height:48,alt:"BASSIN Logo"}),(0,t.jsx)("figcaption",{className:"font-monospace",children:"BASSIN"})]}),(0,t.jsx)("code",{children:"Every decentralized share counts"})]})]})}function c(e){let{label:s,headline:r}=e;return(0,t.jsxs)("section",{className:"metric",children:[(0,t.jsx)("span",{className:"metric-label",children:s}),(0,t.jsx)("h3",{className:"metric-headline font-barlow",dangerouslySetInnerHTML:{__html:r}})]})}let o=e=>{let s=e.match(/^([\d.]+)([KMGTPEZY])$/);if(!s)return e;let[,r,t]=s;return`${r}<span>${t}h/s</span>`},h=function(e){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1];for(let{limit:r,symbol:t}of[{limit:1e12,symbol:"T"},{limit:1e9,symbol:"G"},{limit:1e6,symbol:"M"},{limit:1e3,symbol:"K"}])if(e>=r)return(e/r).toFixed(2)+(s?`<span>${t}</span>`:` ${t}`);return e.toFixed(2)},d=e=>{let s=Math.floor(e/86400),r=Math.floor(e%86400/3600),t=Math.floor(e%3600/60);return s?`${s}<span>d</span> ${r}<span>h</span>`:r?`${r}<span>h</span> ${t}<span>m</span>`:`${t}<span>m</span>`},x=e=>{let s=Math.floor(Date.now()/1e3)-e;return s>60?`${d(s)} <span>ago</span>`:"now"};function j(e){return{__html:e}}function m(e){let{pool:s}=e;return(0,t.jsxs)("div",{className:"tiles",children:[(0,t.jsxs)("section",{className:"tile",children:[(0,t.jsx)("h3",{className:"tile-headline font-barlow",children:"Hashrate"}),(0,t.jsxs)("ul",{className:"tile-items",children:[(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"5 Minutes",headline:o(s.hashrate5m)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"1 Hour",headline:o(s.hashrate1hr)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"1 Day",headline:o(s.hashrate1d)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"1 Week",headline:o(s.hashrate7d)})})]})]}),(0,t.jsxs)("section",{className:"tile",children:[(0,t.jsx)("h3",{className:"tile-headline font-barlow",children:"Shares"}),(0,t.jsxs)("ul",{className:"tile-items",children:[(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"Best",headline:h(s.bestshare)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"/Second",headline:`${s.SPS1m}`})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"Accepted",headline:h(s.accepted)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"Rejected",headline:h(s.rejected)})})]})]}),(0,t.jsxs)("section",{className:"tile",children:[(0,t.jsx)("h3",{className:"tile-headline font-barlow",children:"Info"}),(0,t.jsxs)("ul",{className:"tile-items",children:[(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"Uptime",headline:d(s.runtime)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:`User${1!==s.Users?"s":""}`,headline:`${s.Users}`})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:"Update",headline:x(s.lastupdate)})}),(0,t.jsx)("li",{className:"tile-item",children:(0,t.jsx)(c,{label:`Worker${1!==s.Workers?"s":""}`,headline:`${s.Workers}`})})]})]})]})}function u(e){let{primary:s,secondary:r}=e,[a,n]=(0,l.useState)(!1);return(0,t.jsxs)("div",{className:"divider",children:[(0,t.jsx)("span",{children:r}),(0,t.jsx)("strong",{className:a?"active":"",onClick:()=>{n(e=>!e)},title:(a?"Show":"Hide")+" username",children:s})]})}function p(e){let{msg:s}=e;return(0,t.jsxs)("div",{className:"message",children:[(0,t.jsx)("strong",{children:s}),(0,t.jsx)("table",{children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Stratum"}),(0,t.jsx)("td",{children:(0,t.jsx)("code",{children:`${window.location.hostname}:3456`})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Username"}),(0,t.jsx)("td",{children:(0,t.jsx)("code",{children:"<btcaddress>.<worker>"})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Password"}),(0,t.jsx)("td",{children:(0,t.jsx)("code",{children:"x"})})]})]})})]})}function f(e){let{user:s}=e;return(0,t.jsxs)("table",{children:[(0,t.jsxs)("thead",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col"}),(0,t.jsx)("th",{scope:"col",colSpan:4,className:"font-barlow",children:"Hashrate"}),(0,t.jsx)("th",{scope:"col",colSpan:4,className:"font-barlow",children:"Shares"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{scope:"col",children:"Worker"}),(0,t.jsx)("th",{scope:"col",children:"5 Minutes"}),(0,t.jsx)("th",{scope:"col",children:"1 Hour"}),(0,t.jsx)("th",{scope:"col",children:"1 Day"}),(0,t.jsx)("th",{scope:"col",children:"1 Week"}),(0,t.jsx)("th",{scope:"col",children:"â†“ Best"}),(0,t.jsx)("th",{scope:"col",children:"Best Ever"}),(0,t.jsx)("th",{scope:"col",children:"Total"}),(0,t.jsx)("th",{scope:"col",children:"Last"})]})]}),(0,t.jsxs)("tbody",{children:[s.worker.sort((e,s)=>s.bestshare-e.bestshare).map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{scope:"row",children:e.workername.split(".").pop()}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(e.hashrate5m))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(e.hashrate1hr))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(e.hashrate1d))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(e.hashrate7d))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(h(e.bestshare))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(h(e.bestever))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(h(e.shares))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(x(e.lastshare))})]},e.workername)),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{scope:"row"}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(s.hashrate5m))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(s.hashrate1hr))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(s.hashrate1d))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(o(s.hashrate7d))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(h(s.bestshare))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(h(s.bestever))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(h(s.shares))}),(0,t.jsx)("td",{dangerouslySetInnerHTML:j(x(s.lastshare))})]})]})]})}function b(e){let{chart:s}=e,r=Math.max(...s);return(0,t.jsxs)("div",{className:"chart",children:[(0,t.jsx)("ul",{children:s.map((e,l)=>{let a=l>0?s[l-1]:null;return(0,t.jsx)("li",{style:{"--start":a?a/r:0,"--end":e?e/r:0},title:h(e,!1)+"h/s"},l)})}),1===s.length&&(0,t.jsx)("small",{children:"Preparing 5 Minutes Hashrate Chart ..."})]})}let g=l.memo(e=>{let{pool:s,users:r,chart:l}=e,a=r.length>0,n=l.length>0;return(0,t.jsx)(t.Fragment,{children:a?(0,t.jsxs)("div",{className:"dashboard",children:[(0,t.jsx)(m,{pool:s}),n&&(0,t.jsx)(b,{chart:l}),r.map(e=>(0,t.jsxs)("section",{className:"user",children:[(0,t.jsx)(u,{primary:e.username,secondary:"User"}),(0,t.jsx)(f,{user:e})]},e.username))]}):(0,t.jsx)(p,{msg:"Awaiting Shares from Miner ..."})})});function w(){return(0,t.jsx)("div",{className:"loader",children:(0,t.jsx)("span",{})})}let y=async e=>{try{let s=await fetch(e);if(!s.ok)throw Error(`Request failed: ${s.status} ${s.statusText}`);return s}catch(e){throw e}},N=async()=>{try{let e=await y(`/pool/pool.status?${Date.now()}`),s=(await e.text()).trim().split("\n").filter(Boolean);if(s.length<3)throw Error("Malformed pool response");let[r,t,l]=s.map(e=>JSON.parse(e));return{...r,...t,...l}}catch(e){throw console.error("Error in fetchPool:",e),e instanceof Error?e:Error("Unknown error in fetchPool")}},S=async()=>{try{let e=`/users/?${Date.now()}`,s=await y(e),r=[...(await s.text()).matchAll(/href="([^"]+)"/g)].map(e=>{let[,s]=e;return s}).filter(Boolean);if(0===r.length)return[];return await Promise.all(r.map(async e=>{let s=await y(`/users/${e}?${Date.now()}`);return{...await s.json(),username:e}}))}catch(e){throw console.error("Error in fetchUsers:",e),e instanceof Error?e:Error("Unknown error in fetchUsers")}},v=document.getElementById("root");v&&a.createRoot(v).render((0,t.jsx)(l.StrictMode,{children:(0,t.jsx)(()=>{let[e,s]=(0,l.useState)(null),[r,a]=(0,l.useState)([]),[n,c]=(0,l.useState)([]),[o,h]=(0,l.useState)(0),d=(0,l.useCallback)(async()=>{try{let[e,r]=await Promise.all([N(),S()]);e&&(s(e),c(s=>[...s,(e=>{if(!e)return 0;let s=e.trim().match(/^([\d.,]+)\s*([KMGTPEZY]?)[H]?\b/i);if(!s)return NaN;let r=parseFloat(s[1].replace(",",".")),t=s[2].toUpperCase();return r*(({H:1,K:1e3,M:1e6,G:1e9,T:1e12,P:1e15,E:1e18,Z:1e21,Y:1e24})[t]||1)})(e.hashrate5m)].slice(-61))),r&&a(r)}catch(e){console.error("Data fetch error:",e)}},[]);return(0,l.useEffect)(()=>{d();let e=setInterval(()=>{h(e=>{let s=e+1;return s>=60?(d(),0):s})},1e3);return()=>clearInterval(e)},[d]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i,{timer:o}),e&&r?(0,t.jsx)(g,{pool:e,users:r,chart:n}):(0,t.jsx)(w,{})]})},{})}))}},s={};function r(t){var l=s[t];if(void 0!==l)return l.exports;var a=s[t]={exports:{}};return e[t](a,a.exports,r),a.exports}r.m=e,r.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{var e=[];r.O=(s,t,l,a)=>{if(t){a=a||0;for(var n=e.length;n>0&&e[n-1][2]>a;n--)e[n]=e[n-1];e[n]=[t,l,a];return}for(var i=1/0,n=0;n<e.length;n++){for(var[t,l,a]=e[n],c=!0,o=0;o<t.length;o++)(!1&a||i>=a)&&Object.keys(r.O).every(e=>r.O[e](t[o]))?t.splice(o--,1):(c=!1,a<i&&(i=a));if(c){e.splice(n--,1);var h=l();void 0!==h&&(s=h)}}return s}})(),r.p="/",(()=>{var e={980:0};r.O.j=s=>0===e[s];var s=(s,t)=>{var l,a,[n,i,c]=t,o=0;if(n.some(s=>0!==e[s])){for(l in i)r.o(i,l)&&(r.m[l]=i[l]);if(c)var h=c(r)}for(s&&s(t);o<n.length;o++)a=n[o],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(h)},t=self.webpackChunkbassin=self.webpackChunkbassin||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var t=r.O(void 0,["361"],function(){return r(936)});t=r.O(t)})();