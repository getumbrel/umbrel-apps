version: "3.7"

services:
  server:
    image: ghcr.io/matter-js/python-matter-server:8.1.2@sha256:6827e352011e2d8c2bde771e446fcf72acc49150ef66bad978816bac1762aad3
    restart: on-failure
    # Required for mDNS to work correctly
    network_mode: host
    # UI at default port 5580
    security_opt:
      # Needed for Bluetooth via dbus
      - apparmor:unconfined
    volumes:
      - ${APP_DATA_DIR}/data:/data/
      # Required for Bluetooth via D-Bus
      - /run/dbus:/run/dbus:ro
