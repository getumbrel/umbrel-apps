services:

  app_proxy:
    environment:
      APP_HOST: invio_frontend_1
      APP_PORT: 8000
      PROXY_AUTH_ADD: "false"

  backend:
    image: ghcr.io/kittendevv/invio-backend:v1.12.1@sha256:ae0c46f5353a9ac3bebbb413ac0edc6c38e7308243d111aa78de2169fb465125
    environment:
      ADMIN_USER: "admin"
      ADMIN_PASS: ${APP_PASSWORD}
      JWT_SECRET: ${APP_SEED}
      SESSION_TTL_SECONDS: 43200
      SECURE_HEADERS_DISABLED: "false"
      ENABLE_HSTS: "true"
      DATABASE_PATH: /app/data/invio.db
    volumes:
      - ${APP_DATA_DIR}/data:/app/data
    restart: on-failure

  frontend:
    image: ghcr.io/kittendevv/invio-frontend:v1.12.1@sha256:426d931e673be4f128bf8c9d51bcac46134733e1832c0ed442710554aa5a31b3
    environment:
      PORT: 8000
      BACKEND_URL: http://invio_backend_1:3000
      COOKIE_SECURE: "false"
      FRONTEND_SECURE_HEADERS_DISABLED: "false"
      ENABLE_HSTS: "false"
    depends_on:
      - backend
    restart: on-failure
