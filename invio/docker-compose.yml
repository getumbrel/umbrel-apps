services:

  app_proxy:
    environment:
      APP_HOST: invio_frontend_1
      APP_PORT: 8000
      PROXY_AUTH_ADD: "false"

  backend:
    image: ghcr.io/kittendevv/invio-backend:v1.9.1@sha256:50beefb017ce21d9375b2175caa119e9418d73f33c6247dca220dda300acf128
    environment:
      ADMIN_USER: "admin"
      ADMIN_PASS: ${APP_PASSWORD}
      JWT_SECRET: ${APP_SEED}
      SESSION_TTL_SECONDS: 43200
      SECURE_HEADERS_DISABLED: "false"
      ENABLE_HSTS: "true"
      DATABASE_PATH: /app/data/invio.db
    volumes:
      - ${APP_DATA_DIR}/data:/app/data
    restart: on-failure

  frontend:
    image: ghcr.io/kittendevv/invio-frontend:v1.9.1@sha256:c963706d75731eae52d303243de942ca46bb1b837b1ed10f6e994dbffdb22e64
    environment:
      PORT: 8000
      BACKEND_URL: http://invio_backend_1:3000
      COOKIE_SECURE: "false"
      FRONTEND_SECURE_HEADERS_DISABLED: "false"
      ENABLE_HSTS: "false"
    depends_on:
      - backend
    restart: on-failure
