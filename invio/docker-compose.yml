services:

  app_proxy:
    environment:
      APP_HOST: invio_frontend_1
      APP_PORT: 8000
      PROXY_AUTH_ADD: "false"

  backend:
    image: ghcr.io/kittendevv/invio-backend:v1.14.0@sha256:a492ef3f538b58cbb83da9019822ab3143a8a081cf78d12aa4de0b76174c34c9
    environment:
      ADMIN_USER: "admin"
      ADMIN_PASS: ${APP_PASSWORD}
      JWT_SECRET: ${APP_SEED}
      SESSION_TTL_SECONDS: 43200
      SECURE_HEADERS_DISABLED: "false"
      ENABLE_HSTS: "true"
      DATABASE_PATH: /app/data/invio.db
    volumes:
      - ${APP_DATA_DIR}/data:/app/data
    restart: on-failure

  frontend:
    image: ghcr.io/kittendevv/invio-frontend:v1.14.0@sha256:03fa40a6763f20ebd39edd522ef9d88f013dad1d79144afdd73b8e13dcafbebb
    environment:
      PORT: 8000
      BACKEND_URL: http://invio_backend_1:3000
      COOKIE_SECURE: "false"
      FRONTEND_SECURE_HEADERS_DISABLED: "false"
      ENABLE_HSTS: "false"
    depends_on:
      - backend
    restart: on-failure
