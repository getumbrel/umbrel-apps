services:

  app_proxy:
    environment:
      APP_HOST: invio_frontend_1
      APP_PORT: 8000
      PROXY_AUTH_ADD: "false"

  backend:
    image: ghcr.io/kittendevv/invio-backend:v1.13.0@sha256:ecd78837f7f50795f0dd9f2bb427a161f9c4b583f8ea62ad5274c5ce7fe6a2b9
    environment:
      ADMIN_USER: "admin"
      ADMIN_PASS: ${APP_PASSWORD}
      JWT_SECRET: ${APP_SEED}
      SESSION_TTL_SECONDS: 43200
      SECURE_HEADERS_DISABLED: "false"
      ENABLE_HSTS: "true"
      DATABASE_PATH: /app/data/invio.db
    volumes:
      - ${APP_DATA_DIR}/data:/app/data
    restart: on-failure

  frontend:
    image: ghcr.io/kittendevv/invio-frontend:v1.13.0@sha256:0dba40aa7865ae31f1dc103761bfbf79da246461dec408a100f297f6e2bac4a8
    environment:
      PORT: 8000
      BACKEND_URL: http://invio_backend_1:3000
      COOKIE_SECURE: "false"
      FRONTEND_SECURE_HEADERS_DISABLED: "false"
      ENABLE_HSTS: "false"
    depends_on:
      - backend
    restart: on-failure
