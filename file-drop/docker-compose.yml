version: "3.7"
services:
  app:
    image: "ghcr.io/besoeasy/file-drop:${TAG}"  # Pre-built image; TAG set by Umbrel
    ports:
      - "3232:3232"  # Main app port (host:container)
      - "3233:8080"  # IPFS gateway (host:container, mapping 3233 to 8080)
    restart: unless-stopped
    volumes:
      - ${APP_DATA_DIR}/file-drop:/root/.ipfs  # Persist IPFS data
    environment:
      - NODE_ENV=production