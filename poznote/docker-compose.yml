version: "3.7"

services:
  app_proxy:
    environment:
      APP_HOST: poznote_app_1
      APP_PORT: 80

  app:
    image: ghcr.io/timothepoznanski/poznote:1.9.9@sha256:2fda86377bdc13f52720ab4baffe9af91c123aa00ac3edb2b8b2302fbcf236ca
    restart: on-failure
    environment:
      SQLITE_DATABASE: /var/www/html/data/database/poznote.db
      POZNOTE_USERNAME: admin
      POZNOTE_PASSWORD: umbrel
      HTTP_WEB_PORT: 80
    volumes:
      - ${APP_DATA_DIR}/data:/var/www/html/data
