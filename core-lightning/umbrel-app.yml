manifestVersion: 1.1
id: core-lightning
category: bitcoin
name: Core Lightning
version: "25.09.3-hotfix.9"
tagline: Run your personal Core Lightning node
description: >-
  Get started with the Lightning network today with Core Lightning - a
  Lightning Network implementation focusing on spec compliance and performance.


  The Lightning Network allows ultra cheap and almost instant Bitcoin transactions.
  By running a Lightning node, you can not only self-custody your Bitcoin on
  Lightning, but also earn sats by routing payments on the network.


  Core Lightning and Application powered by Blockstream.

developer: Core Lightning
website: https://blockstream.com/lightning/
dependencies:
  - bitcoin
repo: https://github.com/ElementsProject/cln-application
support: https://community.corelightning.org/home
port: 2103
gallery:
  - 1.jpg
  - 2.jpg
  - 3.jpg
path: ""
defaultPassword: ""
submitter: Blockstream
submission: https://github.com/getumbrel/umbrel-apps/pull/475
releaseNotes: >-
  This hotfix completes the HA/DR hardening baseline: IP drift is now
  abstracted to stable Docker DNS names across all stack apps.


  **New in hotfix.9 — IP→DNS abstraction (container_name labels):**

  The root cause of IP-drift failures during OS/app restarts and DR recovery
  is that Docker may reassign IP addresses when networks are rebuilt. The fix
  is to use Docker's embedded DNS (container hostnames) for inter-service
  routing instead of static IPs. Three changes close this gap:


  1. `core-lightning/docker-compose.yml` — `app_proxy APP_HOST` updated from the
  static IP `$APP_CORE_LIGHTNING_IP` to the DNS name `core-lightning_app_1`.
  Explicit `container_name` labels added to the `app` and `lightningd` services
  so Docker DNS is deterministic and resilient across container rebuilds.


  2. `core-lightning/exports.sh` — Two new DNS-stable exports added:
  `APP_CORE_LIGHTNING_APP_HOST=core-lightning_app_1` and
  `APP_CORE_LIGHTNING_DAEMON_HOST=core-lightning_lightningd_1`.
  Stack consumers (LNbits, BOLT12, Fedimint integrations) can now reference
  the container hostname instead of the static IP in plain HTTP/WebSocket
  contexts. The legacy `*_IP` and `*_DAEMON_IP` exports are retained as-is
  for backward compat and for TLS-bound connections (gRPC, mTLS) whose
  certificates encode the IP as a SAN.


  3. `core-lightning-rtl/docker-compose.yml` — Explicit `container_name` added
  to the `web` and `boltz` services, pinning the DNS names already hardcoded
  in `app_proxy APP_HOST` and `BOLTZ_SERVER_URL` to their canonical values.


  4. `nostr-relay/docker-compose.yml` — Explicit `container_name` added to
  `web`, `relay`, and `relay-proxy` services, making the Nostr Relay message
  bus DNS (`nostr-relay_relay_1`, `nostr-relay_relay-proxy_1`) stable across
  restart/update cycles. This anchors the Hub-and-Spoke HA baseline: CLN
  micropayment providers can discover the relay bus via the `APP_NOSTR_RELAY_*`
  exports (hotfix.8) and rely on stable DNS resolution at runtime.


  **From hotfix.8 — nostr-relay app-tier exports:**

  `nostr-relay/exports.sh` published `APP_NOSTR_RELAY_HOST/PORT` and
  `APP_NOSTR_RELAY_PROXY_HOST/PORT` for loosely-coupled stack consumers.


  **From hotfix.7 — datum volume baseline:**

  `datum` app logs volume persists across restarts and DR events.


  **From hotfix.6 — canonical CLNRest app-tier exports:**

  `APP_CORE_LIGHTNING_CLNREST_PORT`/`HOST` with backward-compat `REST_*` aliases.


  This hotfix release completes the variable naming gap-map fix: all shell exports in exports.sh now
  follow the consistent `APP_CORE_LIGHTNING_*` prefix convention. Previously, five variables
  (`CORE_LIGHTNING_REST_PORT`, `CORE_LIGHTNING_PATH`, `COMMANDO_CONFIG`, `APP_CONFIG_DIR`, `APP_MODE`)
  were missing their app-scoped prefix, causing DR (disaster-recovery) and harness-reconnection
  failures on external consumers such as RasPi5. All docker-compose.yml, torrc.template, and
  dependent RTL service references have been updated to use the new canonical names.


  **Previous release notes (hotfix.3):**


  This hotfix release adds a dedicated `APP_CORE_LIGHTNING_REST_HOST` export to exports.sh,
  mapping the clnrest endpoint to the daemon's internal IP. This was missing from the hotfix.2 build,
  preventing other apps from reliably discovering the REST API host via the standard
  `APP_CORE_LIGHTNING_*` variable convention. The Tor hidden service and RTL connection URL
  now reference this new variable directly.


  **Previous release notes (hotfix.2):**


  This hotfix release restores internal connectivity for Umbrel apps (RTL, LNbits, etc.) that use the Core Lightning REST API.
  The built-in clnrest plugin is now bound to all network interfaces (0.0.0.0) instead of only the specific Docker internal IP,
  making it accessible from other Umbrel app Docker networks.


  **Previous release notes (hotfix.1):**


  This hotfix release fixes an issue where users were unable to connect external wallet clients to their Core Lightning node.
  If you were previously unable to connect a wallet, please go to "Settings" in the top right > Connect wallet > and select your desired connection method to see corrected connection details.


  **v25.09.3:**


  This updates cln-application to v25.07.3, lightningd to v25.09.3, and replaces the legacy c-lightning-rest service with the built-in REST interface of lightningd.


  **CLN Application v25.07.3:**
    - Proactive mitigation against a widespread npm ecosystem threat involving malicious code in popular packages.
    - Updated and streamlined environment variables for improved configuration and usability
    - Added support for running Commando over secure WebSocket (eg. wss-proxy) connections
    - Removed version and commit suffix from node aliases for a cleaner display
    - Updated BKPR date format from YYYY-MM-DD to UI standard DD MMM, YYYY
    - Added infinite scroll support for BTC Transactions, CLN Offers, and CLN Transactions

  **CLN v25.09.3:**
    - Bookkeeper has been migrated into core lightning, allowing visibility into payments, fees and channel activities.
    - xpay can now directly pay BIP353 addresses (like ₿cln@blockstream.com) and simple offers without extra steps.
    - Better feedback when channel creation fails due to capacity limits.
    - Now limiting the number of parts a payment can be split on xpay and askrene
    - Reckless now supports the modern uv package manager for Python plugins.
    - Improvements to the rate of feasible solutions found in the main loop of the solver on askrene
    - Splicing improvements allow for better compatibility with Eclair and continuous routing during channel modifications.
    - Improve security by ensuring all peers must support channel type.
    - Payment secrets now mandatory in BOLT11 invoices for better payment protection.

backupIgnore:
  - data/lightningd/bitcoin/lightningd.sqlite3
