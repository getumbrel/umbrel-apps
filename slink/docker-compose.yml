version: "3.7"

services:
  app_proxy:
    environment:
      APP_HOST: slink_web_1
      APP_PORT: 3000

  web:
    image: anirdev/slink:v1.8.5@sha256:6b3f63045d66b2b4dc23e1ff36412cf51bbc042893c9c0d8be014d8ab3383a40
    user: "1000:1000"
    restart: on-failure
    environment:
      TZ: UTC
      ORIGIN: http://${DEVICE_DOMAIN_NAME}:8811
      REQUIRE_SSL: "false"
      USER_APPROVAL_REQUIRED: "false"
      USER_PASSWORD_MIN_LENGTH: 8
      USER_PASSWORD_REQUIREMENTS: 15
      IMAGE_MAX_SIZE: 15M
      IMAGE_STRIP_EXIF_METADATA: "true"
      IMAGE_COMPRESSION_QUALITY: 80
      STORAGE_PROVIDER: local
    volumes:
      - ${APP_DATA_DIR}/data/var:/app/var/data
      - ${APP_DATA_DIR}/data/images:/app/slink/images
